var AceTemplate=/^u/.test(typeof exports)?AceTemplate||{}:exports;void function(e){function u(e){var n=[];n.push("with(this){"),n.push(e.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,function(e){return['!#{decodeURIComponent("',encodeURIComponent(e),'")}'].join("")}).replace(/[\r\n]+/g,"\n").replace(/^\n+|\s+$/mg,"").replace(/((^\s*[<>!#^&\u0000-\u0008\u007F-\uffff].*$|^.*[<>]\s*$|^(?!\s*(else|do|try|finally)\s*$)[^'":;{}()]+$|^(\s*(([\w-]+\s*=\s*"[^"]*")|([\w-]+\s*=\s*'[^']*')))+\s*$|^\s*([.#][\w-.]+(:\w+)?(\s*|,))*(?!(else|do|while|try|return)\b)[.#]?[\w-.*]+(:\w+)?\s*\{.*$|^[^"'\n]*(:\/\/|#\{|@).*$)\s?)+/mg,function(e){return e=['"',e.replace(/&none;/g,"").replace(/["'\\]/g,"\\$&").replace(/\n/g,"\\n").replace(/(!?#)\{(.*?)\}/g,function(e,t,n){n=n.replace(/\\n/g,"\n").replace(/\\([\\'"])/g,"$1");var r=/^[a-z$][\w+$]+$/i.test(n)&&!/^(true|false|NaN|null|this)$/.test(n);return['",',r?["typeof ",n,'=="undefined"?"":'].join(""):"",t=="#"?"_encode_":"","(",n,'),"'].join("")}),'"'].join("").replace(/^"",|,""$/g,""),e?["_output_.push(",e,");"].join(""):""})),n.push("}");var r=new Function("_output_","_encode_","helper",n.join(""));return r}var n={quot:'"',lt:"<",gt:">",amp:"&",nbsp:" "},r={'"':"quot","<":"lt",">":"gt","&":"amp"," ":"nbsp"},i={g:function(e){return typeof e!="string"?e:document.getElementById(e)},decodeHTML:function(e){return String(e).replace(/&(quot|lt|gt|amp|nbsp);/ig,function(e,t){return n[t]}).replace(/&#u([a-f\d]{4});/ig,function(e,t){return String.fromCharCode(parseInt("0x"+t))}).replace(/&#(\d+);/ig,function(e,t){return String.fromCharCode(+t)})},encodeHTML:function(e){return String(e).replace(/["<>& ]/g,function(e){return"&"+r[e]+";"})},elementText:function(e){return!e||!e.tagName?"":/^(input|textarea)$/i.test(e.tagName)?e.value:i.decodeHTML(e.innerHTML)}},s={},o=!1;e.format=function(e,t,n){if(!e)return""; var r,o;typeof e=="object"&&e.tagName&&(o=e,e=o.getAttribute("id")),n=n||this,r=s[e],r||(/[^\w-]/.test(e)?r=u(e):(o||(o=i.g(e)),r=this.register(e,o)));var a=[];return r.call(/^u/.test(typeof t)?"":t,a,i.encodeHTML,n),a.join("")},e.register=function(e,t){if(!arguments.length&&!o){o=!0;var n=document.getElementsByTagName("script");for(var r=0;r<n.length;r++){var a=n[r];if(/^(text\/template)$/i.test(a.getAttribute("type"))){var e=a.getAttribute("id");e&&arguments.callee.call(this,e,a)}}}if(!e)return;return s[e]?s[e]:(typeof t!="string"&&(typeof t=="undefined"&&(t=i.g(e)),t=i.elementText(t)),s[e]=u(t))},e.unregister=function(e){delete s[e]}}(AceTemplate)